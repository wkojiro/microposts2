<!--Retweetされたかどうかを判別-->

<!--Retweet の呟き　の場合のテンプレートと通常のテンプレートを分けるべき -->


<% if micropost.origin_id.present? %>
    <span class "retweet"> <%= micropost.user.name %> がツイート</span>

<%= @origintweet = Micropost.find(micropost.origin_id) %>
<%= @origintweet.id %>
<%= micropost.id %>

<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="content"><%= micropost.content %></span>
  
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    <span class="favorite">投稿No.<%= micropost.id %> ユーザーNo.<%= micropost.user.id %></span>
   <% if current_user == micropost.user %>
      <%#= link_to "delete", micropost, method: :delete, data: { confirm: "You sure?" } %>
      <%= link_to "delete2", micropost_path(micropost), method: :delete, data: { confirm: "You sure?" } %>
   <% end %> 
   <div id="goodpst_<%= micropost.id %>" > 
    <% if current_user.favorite?(micropost) %> 
    <%#= link_to "いいね", unfavorite_favorite_path(micropost), :class => "btn btn-default btn-xs" %>
     <%= render :partial => 'users/unfav', :locals => { :micropost => micropost } %>(<%= micropost.favorites.count %>)
    <% else %>
    <%#= link_to "いいね", favorite_favorite_path(micropost), :class => "btn btn-primary btn-xs" %>   
    <%= render :partial => 'users/fav', :locals => { :micropost => micropost } %>
    <% end %>
  </div>  
  <% if current_user.id != micropost.user.id %>
 <div id="retweetpst_<%= micropost.id %>" > 
    <%# if current_user.retweet?(micropost) %>
     <%= link_to "retweet", retweet_retweet_path(micropost), :class => "btn btn-default btn-xs" %>    
    <%# else %>
     <%= link_to "retweet", unretweet_retweet_path(micropost), :class => "btn btn-info btn-xs" %>  
    <%# end %>  
 </div>
 <% end %>
<!--パーシャルの代用　-->  
      <%# @favorites = Favorite.all.inspect %> 
      <%#= render partial: 'users/favorite_form', locals: { micropost: micropost } %>
      <%#= render partial: 'users/favorite_form', mp: @micropost %>
<div id="favorite_form_<%= micropost.id %>">
  <%# if current_user.favorite?(micropost) %>
    <%#= render partial: 'users/unfavorite', locals: { micropost: micropost } %>
    <%#= render partial: 'users/unfavorite', collection: micropost %>    
  <%# else %>
    <%#= render partial: 'users/favorite', locals: { micropost: micropost } %>
    <%#= render partial: 'users/favorite', collection: micropost %>
  <%# end %>
</div>      
<!--パーシャルの代用　-->      


  </span>
</li>



















<% else %>


<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
  <span class="user"><%= link_to micropost.user.name, micropost.user %></span>
  <span class="content"><%= micropost.content %></span>
  
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    <span class="favorite">投稿No.<%= micropost.id %> ユーザーNo.<%= micropost.user.id %></span>
   <% if current_user == micropost.user %>
      <%#= link_to "delete", micropost, method: :delete, data: { confirm: "You sure?" } %>
      <%= link_to "delete2", micropost_path(micropost), method: :delete, data: { confirm: "You sure?" } %>
   <% end %> 
   <div id="goodpst" > 
    <% if current_user.favorite?(micropost) %> 
    <%#= link_to "いいね", unfavorite_favorite_path(micropost), :class => "btn btn-default btn-xs" %>
     <%= render :partial => 'users/unfav', :locals => { :micropost => micropost } %>(<%= micropost.favorites.count %>)
    <% else %>
    <%#= link_to "いいね", favorite_favorite_path(micropost), :class => "btn btn-primary btn-xs" %>   
    <%= render :partial => 'users/fav', :locals => { :micropost => micropost } %>
    <% end %>
  </div>  
  <% if current_user.id != micropost.user.id %>
 <div id="retweetpst_<%= micropost.id %>" > 
    <%# if current_user.retweet?(micropost) %>
     <%= link_to "retweet", retweet_retweet_path(micropost), :class => "btn btn-default btn-xs" %>    
    <%# else %>
     <%= link_to "retweet", unretweet_retweet_path(micropost), :class => "btn btn-info btn-xs" %>  
    <%# end %>  
 </div>
 <% end %>
<!--パーシャルの代用　-->  
      <%# @favorites = Favorite.all.inspect %> 
      <%#= render partial: 'users/favorite_form', locals: { micropost: micropost } %>
      <%#= render partial: 'users/favorite_form', mp: @micropost %>
<div id="favorite_form_<%= micropost.id %>">
  <%# if current_user.favorite?(micropost) %>
    <%#= render partial: 'users/unfavorite', locals: { micropost: micropost } %>
    <%#= render partial: 'users/unfavorite', collection: micropost %>    
  <%# else %>
    <%#= render partial: 'users/favorite', locals: { micropost: micropost } %>
    <%#= render partial: 'users/favorite', collection: micropost %>
  <%# end %>
</div>      
<!--パーシャルの代用　-->      


  </span>
</li>

<% end %>